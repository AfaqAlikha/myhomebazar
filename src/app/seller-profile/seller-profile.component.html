<div class=" container mx-auto py-4 px-10">
  <!-- Profile Card -->
  <h1 class="text-[24px] font-bold my-3">{{ user.name }} Profile</h1>
  <div
    class="w-full max-w-xxl p-6 mb-6 bg-[var(--color-card)] rounded-2xl shadow-md transition-colors duration-300"
  >
    <div class="flex flex-col items-center mb-4">
      <div
        class="w-20 h-20 bg-[var(--color-accent)] rounded-full flex items-center justify-center text-white text-2xl font-bold mb-3"
      >
        {{ getInitial(user?.name) }}
      </div>
      <h2 class="text-xl font-semibold">{{ user?.name }}</h2>
      <span *ngIf="user?.bio" class="p-2 text-center text-[13px] rounded-md">{{
        user?.bio
      }}</span>
    </div>

    <div class="flex justify-around mb-6 text-sm">
      <div class="text-center">
        <p class="font-bold">{{ user?.rating || 0 }}/5 ‚≠ê</p>
        <p>Rating</p>
      </div>
      <div class="text-center">
        <p class="font-bold">{{ user?.completedOrders || 0 }}</p>
        <p>Completed Orders</p>
      </div>
      <div class="text-center" *ngIf="user?.badges?.length">
        <p class="font-bold text-green-500" *ngFor="let badge of user.badges">
          {{ badge }}
        </p>
        <p>Badges</p>
      </div>
    </div>

    <!-- Profile Info (Read-Only) -->
    <form [formGroup]="form" class="flex flex-col gap-4">
      <div class="flex flex-col">
        <label class="text-sm font-medium mb-1">Name</label>
        <span class="p-2 bg-gray-100 rounded-md">{{ user?.name }}</span>
      </div>

      <div class="flex flex-col">
        <label class="text-sm font-medium mb-1">Email</label>
        <span class="p-2 bg-gray-100 rounded-md">{{ user?.email }}</span>
      </div>
    </form>
  </div>

  <!-- Products Section -->
  <div class="w-full">
    <h1 class="text-[24px] font-bold my-3">{{ user.name }} Products</h1>

    <ngx-spinner
      bdColor="rgba(51,51,51,0.8)"
      size="medium"
      color="#fff"
      type="ball-scale-multiple"
    ></ngx-spinner>

    <div
      class="my-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
    >
      <div
        *ngIf="!noProducts && products.length === 0"
        class="col-span-full text-center text-gray-500 font-medium py-10"
      >
        Loading products...
      </div>
      <div
        *ngIf="noProducts"
        class="col-span-full text-center text-gray-500 font-medium py-10"
      >
        No products found
      </div>

      <app-product-card
        *ngFor="let product of products"
        [product]="product"
      ></app-product-card>
    </div>
  </div>

  <div class="flex w-full justify-end mt-6">
    <mat-paginator
      [length]="totalItems"
      [pageSize]="itemsPerPage"
      [pageSizeOptions]="[itemsPerPage]"
      [pageIndex]="currentPage - 1"
      (page)="pageChanged($event)"
    ></mat-paginator>
  </div>
</div>
