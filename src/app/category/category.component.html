<div class="container mx-auto grid grid-cols-1 md:grid-cols-12 gap-6 mt-6 min-h-screen">
  <!-- Sidebar -->
  <div class="md:col-span-3 mb-4 order-2 md:order-1">
    <app-ui-card [borderRadius]="borderRadius" class="mt-4 h-[400px] md:h-[500px] overflow-y-auto">
      <h2 class="text-lg font-semibold mb-3">Sub Categories</h2>
      <ul class="space-y-2">
        <!-- ✅ All Products Button -->
        <li
          class="cursor-pointer font-medium"
          [ngClass]="{ 'text-[var(--color-accent)]': !selectedSubCategory }"
          (click)="showAllProducts()"
        >
          All Products
        </li>

        <!-- ✅ Sub Categories -->
        <li
          *ngFor="let sub of subCategories"
          class="cursor-pointer hover:text-[var(--color-accent)]"
          [ngClass]="{
            'text-[var(--color-accent)]': selectedSubCategory === sub.subCategory,
          }"
          (click)="selectSubCategory(sub.subCategory)"
        >
          {{ sub.subCategory }}
        </li>
      </ul>
    </app-ui-card>
  </div>

  <!-- Products Section -->
  <div class="md:col-span-9 flex flex-col order-1 md:order-2">
    <!-- Top Bar: Search + Sort -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6 px-3">
      <!-- Search -->
      <div class="w-full md:w-auto">
        <app-ui-search (search)="onSearch($event)"></app-ui-search>
      </div>

      <!-- Sort -->
      <div class="flex justify-start md:justify-end gap-3">
        <button
          class="px-4 py-2 border rounded-md"
          [ngClass]="{
            'bg-[var(--color-accent)]': sortOrder === 'low',
          }"
          (click)="setSort('low')"
        >
          Low to High
        </button>

        <button
          class="px-4 py-2 border rounded-md"
          [ngClass]="{
            'bg-[var(--color-accent)]': sortOrder === 'high',
          }"
          (click)="setSort('high')"
        >
          High to Low
        </button>
      </div>
    </div>

    <ngx-spinner bdColor="rgba(51,51,51,0.8)" size="medium" color="#fff" type="ball-scale-multiple">
    </ngx-spinner>

    <!-- Product Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 flex-grow">
      <div
        *ngIf="!noProducts && products.length === 0"
        class="col-span-full text-center text-gray-500 font-medium py-10"
      >
        Loading products...
      </div>

      <div *ngIf="noProducts" class="col-span-full text-center text-gray-500 font-medium py-10">
        No products found
      </div>

      <app-product-card *ngFor="let product of products" [product]="product"></app-product-card>
    </div>

    <!-- Angular Material Pagination -->
    <div class="flex justify-center md:justify-end mt-6">
      <mat-paginator
        [length]="totalItems"
        [pageSize]="itemsPerPage"
        [pageSizeOptions]="[itemsPerPage]"
        [pageIndex]="currentPage - 1"
        (page)="pageChanged($event)"
      >
      </mat-paginator>
    </div>
  </div>
</div>
